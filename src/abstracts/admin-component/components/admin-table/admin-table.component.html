<!-- In admin-table.component.html -->
<div class="p-6 bg-white rounded-lg shadow-sm">
  <div class="overflow-x-auto bg-white rounded-lg border border-gray-200">
    <table class="min-w-full divide-y divide-gray-200">
      <thead class="bg-gray-50">
        <tr>
          @for (column of columns; track column.key) {
            <th
              class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
              [style.width]="column.width || 'auto'"
            >
              <div class="flex items-center gap-2">
                <span>{{ column.label }}</span>

                @if (column.sortable) {
                  <button
                    type="button"
                    (click)="onSortChange(column.key, 'asc')"
                    class="text-gray-400 hover:text-gray-600 transition-colors"
                  >
                    ↕
                  </button>
                }
              </div>
            </th>
          }
          <th
            class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"
          >
            Actions
          </th>
        </tr>
        <!-- In admin-table.component.html -->
        @if (hasColumnFilters) {
          <tr class="bg-gray-50">
            @for (column of columns; track column.key) {
              <th class="px-6 py-2">
                @if (column.filterable) {
                  @if (column.filterType === "text") {
                    <input
                      type="text"
                      (input)="onFilterChange($event, column)"
                      [value]="columnFilters.get(column.key)?.value || ''"
                      class="w-full p-1 border-none focus:ring-0 text-sm"
                      placeholder="Filter..."
                    />
                  }
                  @if (column.filterType === "select") {
                    <select
                      (change)="onFilterChange($event, column)"
                      [value]="columnFilters.get(column.key)?.value || ''"
                      class="w-full p-1 border-none focus:ring-0 text-sm"
                    >
                      <option value="">All</option>
                      @for (
                        option of column.filterOptions;
                        track option.value
                      ) {
                        <option [value]="option.value">
                          {{ option.label }}
                        </option>
                      }
                    </select>
                  }
                  @if (column.filterType === "boolean") {
                    <select
                      (change)="onFilterChange($event, column)"
                      [value]="columnFilters.get(column.key)?.value ?? ''"
                      class="w-full p-1 border-none focus:ring-0 text-sm"
                    >
                      <option value="">All</option>
                      <option value="true">
                        {{ column.filterTrueLabel || "YES" }}
                      </option>
                      <option value="false">
                        {{ column.filterFalseLabel || "NO" }}
                      </option>
                    </select>
                  }
                }
              </th>
            }
            <th class="px-6 py-2"></th>
          </tr>
        }
      </thead>
      <tbody class="bg-white divide-y divide-gray-200">
        @if (data.length === 0) {
          <tr>
            <td
              [attr.colspan]="columns.length + 1"
              class="px-6 py-8 text-center text-gray-500"
            >
              <div class="space-y-2">
                <svg
                  class="w-12 h-12 mx-auto text-gray-300"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"
                  />
                </svg>
                <p class="text-lg font-medium">No items found</p>
                <p class="text-sm">Get started by creating your first item.</p>
              </div>
            </td>
          </tr>
        } @else {
          @for (item of data; track item) {
            <tr class="hover:bg-gray-50 transition-colors">
              @for (column of columns; track column.key) {
                <td
                  class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"
                  [style.width]="column.width || 'auto'"
                >
                  <span
                    [innerHTML]="
                      formatCellValue(
                        getNestedValue(item, column.key),
                        column,
                        item
                      )
                    "
                  ></span>
                </td>
              }
              <td
                class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-3"
              >
                <button
                  type="button"
                  class="text-blue-600 hover:text-blue-900 transition-colors inline-flex items-center gap-1"
                  title="Edit item"
                >
                  <svg
                    class="w-4 h-4"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"
                    />
                  </svg>
                  Edit
                </button>
                <button
                  type="button"
                  class="text-red-600 hover:text-red-900 transition-colors inline-flex items-center gap-1"
                  title="Delete item"
                >
                  <svg
                    class="w-4 h-4"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"
                    />
                  </svg>
                  Delete
                </button>
              </td>
            </tr>
          }
        }
      </tbody>
    </table>
  </div>

  <!-- Pagination -->
  @if (pagination.totalPages > 1) {
    <div class="flex items-center justify-between mt-6">
      <div class="text-sm text-gray-700">
        Page {{ pagination.currentPage }} of {{ pagination.totalPages }}
      </div>
      <div class="flex gap-2">
        <button
          type="button"
          [disabled]="pagination.currentPage === 1"
          (click)="onPageChange(1)"
          class="px-3 py-2 border border-gray-300 rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 transition-colors text-sm"
          title="First page"
        >
          ««
        </button>
        <button
          type="button"
          [disabled]="pagination.currentPage === 1"
          (click)="onPageChange(pagination.currentPage - 1)"
          class="px-3 py-2 border border-gray-300 rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 transition-colors text-sm"
          title="Previous page"
        >
          ‹
        </button>
        @for (page of getVisiblePages(); track page) {
          <button
            type="button"
            [class]="
              page === pagination.currentPage
                ? 'bg-blue-600 text-white border-blue-600'
                : 'bg-white text-gray-700 hover:bg-gray-50 border-gray-300'
            "
            (click)="onPageChange(page)"
            class="px-3 py-2 border rounded-md transition-colors text-sm min-w-[2.5rem]"
          >
            {{ page }}
          </button>
        }
        <button
          type="button"
          [disabled]="pagination.currentPage === pagination.totalPages"
          (click)="onPageChange(pagination.currentPage + 1)"
          class="px-3 py-2 border border-gray-300 rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 transition-colors text-sm"
          title="Next page"
        >
          ›
        </button>
        <button
          type="button"
          [disabled]="pagination.currentPage === pagination.totalPages"
          (click)="onPageChange(pagination.totalPages)"
          class="px-3 py-2 border border-gray-300 rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 transition-colors text-sm"
          title="Last page"
        >
          »»
        </button>
      </div>
    </div>
  }
</div>
